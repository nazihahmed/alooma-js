(function() {
var p=!0,q=null,t=!1;function D(){return function(){}}
(function(){function O(){function a(){if(!a.ub)L=a.ub=p,M=t,b.a(y,function(a){a.cb()})}function c(){try{m.documentElement.doScroll("left")}catch(b){setTimeout(c,1);return}a()}if(m.addEventListener)"complete"==m.readyState?a():m.addEventListener("DOMContentLoaded",a,t);else if(m.attachEvent){m.attachEvent("onreadystatechange",a);var d=t;try{d=window.frameElement==q}catch(e){}m.documentElement.doScroll&&d&&c()}b.qa(window,"load",a,p)}function P(){u.init=function(a,c,b){if(b)return u[b]||(u[b]=y[b]=
F(a,c,b),u[b].N()),u[b];b=u;if(y.alooma)b=y.alooma;else if(a)b=F(a,c,"alooma"),b.N(),y.alooma=b;u=b;1===J&&(window.alooma=u);Q()}}function Q(){b.a(y,function(a,b){"alooma"!==b&&(u[b]=a)});u._=b}function l(){}function g(){}function F(a,c,d){var e,f="alooma"===d?u:u[d];if(f&&0===J)e=f;else{if(f&&!b.isArray(f)){n.error("You have already initialized "+d);return}e=new g}e.aa(a,c,d);e.people=new l;e.people.aa(e);z=z||e.e("debug");!b.d(f)&&b.isArray(f)&&(e.Z.call(e.people,f.people),e.Z(f));return e}function k(a){this.props=
{};this.xa=t;this.name=a.persistence_name?"mp_"+a.persistence_name:"mp_"+a.token+"_alooma";var c=a.persistence;if("cookie"!==c&&"localStorage"!==c)n.F('Unknown persistence type "'+c+'"; falling back to "cookie"'),c=a.persistence="cookie";if(c="localStorage"===c){c=p;try{b.localStorage.set("__mplssupport__","xyz"),"xyz"!==b.localStorage.get("__mplssupport__")&&(c=t),b.localStorage.remove("__mplssupport__")}catch(d){c=t}c||n.error("localStorage unsupported; falling back to cookie store")}this.k=c?b.localStorage:
b.cookie;this.load();this.Va(a);this.Vb(a);this.save()}function G(){this.La="submit"}function B(){this.La="click"}function x(){}var J,u,K=Array.prototype,R=Function.prototype,N=Object.prototype,C=K.slice,E=N.toString,H=N.hasOwnProperty,w=window.console,A=window.navigator,m=window.document,v=A.userAgent,S="__mps,__mpso,__mpa,__mpap,__mpu,$people_distinct_id,__alias,__cmpns,__timers".split(","),I=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,M=!I&&-1==v.indexOf("MSIE")&&-1==v.indexOf("Mozilla"),
b={},z=t,T={api_host:("https:"==m.location.protocol?"https://":"http://")+"api.alooma.com",cross_subdomain_cookie:p,persistence:"cookie",persistence_name:"",cookie_name:"",loaded:D(),store_google:p,save_referrer:p,test:t,verbose:t,img:t,track_pageview:p,debug:t,track_links_timeout:300,cookie_expiration:365,upgrade:t,disable_persistence:t,disable_cookie:t,secure_cookie:t,ip:p,property_blacklist:[]},L=t;(function(){var a=R.bind,c=K.forEach,d=K.indexOf,e=Array.isArray,f={};b.bind=function(c,d){var f,
e;if(a&&c.bind===a)return a.apply(c,C.call(arguments,1));if(!b.Ha(c))throw new TypeError;f=C.call(arguments,2);return e=function(){if(!(this instanceof e))return c.apply(d,f.concat(C.call(arguments)));ctor.prototype=c.prototype;var a=new ctor;ctor.prototype=q;var b=c.apply(a,f.concat(C.call(arguments)));return Object(b)===b?b:a}};b.nb=function(a){for(var c in a)"function"===typeof a[c]&&(a[c]=b.bind(a[c],a))};var j=b.a=function(a,b,d){if(a!=q)if(c&&a.forEach===c)a.forEach(b,d);else if(a.length===
+a.length)for(var e=0,j=a.length;e<j&&!(e in a&&b.call(d,a[e],e,a)===f);e++);else for(e in a)if(H.call(a,e)&&b.call(d,a[e],e,a)===f)break};b.j=function(a){a&&b.na(a)&&(a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));return a};b.extend=function(a){j(C.call(arguments,1),function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])});return a};b.isArray=e||function(a){return"[object Array]"===E.call(a)};b.Ha=function(a){try{return/^\s*\bfunction\b/.test(a)}catch(b){return t}};
b.Ab=function(a){return!(!a||!H.call(a,"callee"))};b.I=function(a){return!a?[]:a.I?a.I():b.isArray(a)||b.Ab(a)?C.call(a):b.Xb(a)};b.Xb=function(a){var b=[];if(a==q)return b;j(a,function(a){b[b.length]=a});return b};b.nc=function(a){return a};b.Da=function(a,b){var c=t;if(a==q)return c;if(d&&a.indexOf===d)return-1!=a.indexOf(b);j(a,function(a){if(c||(c=a===b))return f});return c};b.g=function(a,b){return-1!==a.indexOf(b)}})();b.Fa=function(a,b){a.prototype=new b;a.Ob=b.prototype};b.h=function(a){return a===
Object(a)&&!b.isArray(a)};b.v=function(a){if(b.h(a)){for(var c in a)if(H.call(a,c))return t;return p}return t};b.d=function(a){return void 0===a};b.na=function(a){return"[object String]"==E.call(a)};b.Bb=function(a){return"[object Date]"==E.call(a)};b.Cb=function(a){return"[object Number]"==E.call(a)};b.Ba=function(a){b.a(a,function(c,d){b.Bb(c)?a[d]=b.vb(c):b.h(c)&&(a[d]=b.Ba(c))});return a};b.vb=function(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+
b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())};b.Q=function(a){return function(){try{a.apply(this,arguments)}catch(b){n.F("Implementation error. Please contact support@alooma.com.")}}};b.Hb=function(a){for(var c=["identify"],d=0;d<c.length;d++)a.prototype[c[d]]=b.Q(a.prototype[c[d]])};b.R=function(a){var c={};b.a(a,function(a,e){b.na(a)&&0<a.length&&(c[e]=a)});return c};b.truncate=function(a,c){var d;"string"===typeof a?d=a.slice(0,c):b.isArray(a)?(d=[],
b.a(a,function(a){d.push(b.truncate(a,c))})):b.h(a)?(d={},b.a(a,function(a,f){d[f]=b.truncate(a,c)})):d=a;return d};b.A=function(){return function(a){function b(a,f){var j="",h=0,i=h="",i=0,g=j,o=[],r=f[a];r&&"object"===typeof r&&"function"===typeof r.toJSON&&(r=r.toJSON(a));switch(typeof r){case "string":return d(r);case "number":return isFinite(r)?""+r:"null";case "boolean":case "null":return""+r;case "object":if(!r)return"null";j+="    ";o=[];if("[object Array]"===E.apply(r)){i=r.length;for(h=
0;h<i;h+=1)o[h]=b(h,r)||"null";return i=0===o.length?"[]":j?"[\n"+j+o.join(",\n"+j)+"\n"+g+"]":"["+o.join(",")+"]"}for(h in r)H.call(r,h)&&(i=b(h,r))&&o.push(d(h)+(j?": ":":")+i);return i=0===o.length?"{}":j?"{"+o.join(",")+""+g+"}":"{"+o.join(",")+"}"}}function d(a){var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.lastIndex=0;return b.test(a)?
'"'+a.replace(b,function(a){var b=c[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}return b("",{"":a})}}();b.J=function(){function a(){switch(i){case "t":return f("t"),f("r"),f("u"),f("e"),p;case "f":return f("f"),f("a"),f("l"),f("s"),f("e"),t;case "n":return f("n"),f("u"),f("l"),f("l"),q}j("Unexpected '"+i+"'")}function b(){for(;i&&" ">=i;)f()}function d(){var a,b,c="",d;if('"'===i)for(;f();){if('"'===i)return f(),c;if("\\"===i)if(f(),"u"===i){for(b=
d=0;4>b;b+=1){a=parseInt(f(),16);if(!isFinite(a))break;d=16*d+a}c+=String.fromCharCode(d)}else if("string"===typeof g[i])c+=g[i];else break;else c+=i}j("Bad string")}function e(){var a;a="";"-"===i&&(a="-",f("-"));for(;"0"<=i&&"9">=i;)a+=i,f();if("."===i)for(a+=".";f()&&"0"<=i&&"9">=i;)a+=i;if("e"===i||"E"===i){a+=i;f();if("-"===i||"+"===i)a+=i,f();for(;"0"<=i&&"9">=i;)a+=i,f()}a=+a;if(isFinite(a))return a;j("Bad number")}function f(a){a&&a!==i&&j("Expected '"+a+"' instead of '"+i+"'");i=o.charAt(h);
h+=1;return i}function j(a){throw{name:"SyntaxError",message:a,hc:h,text:o};}var h,i,g={'"':'"',"\\":"\\","/":"/",b:"\u0008",f:"\u000c",n:"\n",r:"\r",t:"\t"},o,r;r=function(){b();switch(i){case "{":var h;a:{var g,o={};if("{"===i){f("{");b();if("}"===i){f("}");h=o;break a}for(;i;){g=d();b();f(":");Object.hasOwnProperty.call(o,g)&&j('Duplicate key "'+g+'"');o[g]=r();b();if("}"===i){f("}");h=o;break a}f(",");b()}}j("Bad object")}return h;case "[":a:{h=[];if("["===i){f("[");b();if("]"===i){f("]");g=h;
break a}for(;i;){h.push(r());b();if("]"===i){f("]");g=h;break a}f(",");b()}}j("Bad array")}return g;case '"':return d();case "-":return e();default:return"0"<=i&&"9">=i?e():a()}};return function(a){o=a;h=0;i=" ";a=r();b();i&&j("Syntax error");return a}}();b.fa=function(a){var c,d,e,f,j=0,h=0,i="",i=[];if(!a)return a;a=b.Wb(a);do c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=a.charCodeAt(j++),f=c<<16|d<<8|e,c=f>>18&63,d=f>>12&63,e=f>>6&63,f&=63,i[h++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);while(j<a.length);i=i.join("");switch(a.length%3){case 1:i=i.slice(0,-2)+"==";break;case 2:i=i.slice(0,-1)+"="}return i};b.Wb=function(a){var a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),b="",d,e,f=0,j;d=e=0;f=a.length;for(j=0;j<f;j++){var h=a.charCodeAt(j),i=q;
128>h?e++:i=127<h&&2048>h?String.fromCharCode(h>>6|192,h&63|128):String.fromCharCode(h>>12|224,h>>6&63|128,h&63|128);i!==q&&(e>d&&(b+=a.substring(d,e)),b+=i,d=e=j+1)}e>d&&(b+=a.substring(d,a.length));return b};b.Za=function(){function a(){function a(b,c){var d,f=0;for(d=0;d<c.length;d++)f|=j[d]<<8*d;return b^f}var b,c,j=[],h=0;for(b=0;b<v.length;b++)c=v.charCodeAt(b),j.unshift(c&255),4<=j.length&&(h=a(h,j),j=[]);0<j.length&&(h=a(h,j));return h.toString(16)}function b(){for(var a=1*new Date,c=0;a==
1*new Date;)c++;return a.toString(16)+c.toString(16)}return function(){var d=(screen.height*screen.width).toString(16);return b()+"-"+Math.random().toString(16).replace(".","")+"-"+a()+"-"+d+"-"+b()}}();b.Ga=function(a){return/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(a)?p:t};b.Wa=function(a){var c,d,e,f=[];b.d(c)&&(c="&");b.a(a,function(a,b){d=encodeURIComponent(a.toString());e=encodeURIComponent(b);f[f.length]=e+"="+d});return f.join(c)};b.Ca=function(a,b){var b=
b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),d=RegExp("[\\?&]"+b+"=([^&#]*)").exec(a);return d===q||d&&"string"!==typeof d[1]&&d[1].length?"":decodeURIComponent(d[1]).replace(/\+/g," ")};b.cookie={get:function(a){for(var a=a+"=",b=m.cookie.split(";"),d=0;d<b.length;d++){for(var e=b[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(a))return decodeURIComponent(e.substring(a.length,e.length))}return q},parse:function(a){var c;try{c=b.J(b.cookie.get(a))||{}}catch(d){}return c},set:function(a,
b,d,e,f){var c;var j="",h="",i="";e&&(c=(j=(j=m.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i))?j[0]:"")?"; domain=."+j:"",j=c);d&&(h=new Date,h.setTime(h.getTime()+864E5*d),h="; expires="+h.toGMTString());f&&(i="; secure");m.cookie=a+"="+encodeURIComponent(b)+h+"; path=/"+j+i},remove:function(a,c){b.cookie.set(a,"",-1,c)}};b.localStorage={error:function(a){n.error("localStorage error: "+a)},get:function(a){try{return window.localStorage.getItem(a)}catch(c){b.localStorage.error(c)}return q},
parse:function(a){try{return b.J(b.localStorage.get(a))||{}}catch(c){}return q},set:function(a,c){try{window.localStorage.setItem(a,c)}catch(d){b.localStorage.error(d)}},remove:function(a){try{window.localStorage.removeItem(a)}catch(c){b.localStorage.error(c)}}};b.qa=function(){function a(a,e,f){return function(j){if(j=j||c(window.event)){var h=p,i;b.Ha(f)&&(i=f(j));j=e.call(a,j);if(t===i||t===j)h=t;return h}}}function c(a){if(a)a.preventDefault=c.preventDefault,a.stopPropagation=c.stopPropagation;
return a}c.preventDefault=function(){this.returnValue=t};c.stopPropagation=function(){this.cancelBubble=p};return function(b,c,f,j){b?b.addEventListener&&!j?b.addEventListener(c,f,t):(c="on"+c,b[c]=a(b,f,b[c])):n.error("No valid element provided to register_event")}}();b.tb=function(){function a(a,b){return 0<=(" "+a.className+" ").replace(c," ").indexOf(" "+b+" ")}var c=/[\t\r\n]/g;return function(c){if(!m.getElementsByTagName)return[];for(var c=c.split(" "),e,f=Array(m),j=0;j<c.length;j++)if(e=
c[j].replace(/^\s+/,"").replace(/\s+$/,""),-1<e.indexOf("#")){var h=e.split("#");e=h[0];f=m.getElementById(h[1]);if(!f||e&&f.nodeName.toLowerCase()!=e)return[];f=Array(f)}else if(-1<e.indexOf(".")){h=e.split(".");e=h[0];var i=h[1];e||(e="*");for(var h=[],g=0,o=0;o<f.length;o++){var r;r="*"==e?f[o].all?f[o].all:f[o].getElementsByTagName("*"):f[o].getElementsByTagName(e);for(var k=0;k<r.length;k++)h[g++]=r[k]}f=[];for(g=e=0;g<h.length;g++)h[g].className&&b.na(h[g].className)&&a(h[g],i)&&(f[e++]=h[g])}else if(h=
e.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){e=h[1];var l=h[2],i=h[3],n=h[4];e||(e="*");h=[];for(o=g=0;o<f.length;o++){r="*"==e?f[o].all?f[o].all:f[o].getElementsByTagName("*"):f[o].getElementsByTagName(e);for(k=0;k<r.length;k++)h[g++]=r[k]}f=[];e=0;switch(i){case "=":i=function(a){return a.getAttribute(l)==n};break;case "~":i=function(a){return a.getAttribute(l).match(RegExp("\\b"+n+"\\b"))};break;case "|":i=function(a){return a.getAttribute(l).match(RegExp("^"+n+"-?"))};break;case "^":i=
function(a){return 0==a.getAttribute(l).indexOf(n)};break;case "$":i=function(a){return a.getAttribute(l).lastIndexOf(n)==a.getAttribute(l).length-n.length};break;case "*":i=function(a){return-1<a.getAttribute(l).indexOf(n)};break;default:i=function(a){return a.getAttribute(l)}}f=[];for(g=e=0;g<h.length;g++)i(h[g])&&(f[e++]=h[g])}else{h=[];for(o=g=0;o<f.length;o++){r=f[o].getElementsByTagName(e);for(k=0;k<r.length;k++)h[g++]=r[k]}f=h}return f}}();b.info={pb:function(){var a="",c={};b.a("utm_source utm_medium utm_campaign utm_content utm_term".split(" "),
function(d){a=b.Ca(m.URL,d);a.length&&(c[d]=a)});return c},Ib:function(a){return 0===a.search("https?://(.*)google.([^/?]*)")?"google":0===a.search("https?://(.*)bing.com")?"bing":0===a.search("https?://(.*)yahoo.com")?"yahoo":0===a.search("https?://(.*)duckduckgo.com")?"duckduckgo":q},Jb:function(a){var c=b.info.Ib(a),d={};if(c!==q)d.$search_engine=c,a=b.Ca(a,"yahoo"!=c?"q":"p"),a.length&&(d.mp_keyword=a);return d},D:function(a,c,d){return d||b.g(a," OPR/")?b.g(a,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(a)?
"BlackBerry":b.g(a,"IEMobile")||b.g(a,"WPDesktop")?"Internet Explorer Mobile":b.g(a,"Edge")?"Microsoft Edge":b.g(a,"FBIOS")?"Facebook Mobile":b.g(a,"Chrome")?"Chrome":b.g(a,"CriOS")?"Chrome iOS":b.g(c||"","Apple")?b.g(a,"Mobile")?"Mobile Safari":"Safari":b.g(a,"Android")?"Android Mobile":b.g(a,"Konqueror")?"Konqueror":b.g(a,"Firefox")?"Firefox":b.g(a,"MSIE")||b.g(a,"Trident/")?"Internet Explorer":b.g(a,"Gecko")?"Mozilla":""},wa:function(a,c,d){c={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,
Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/Chrome\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[b.info.D(a,c,d)];if(void 0==c)return q;a=a.match(c);return!a?q:parseFloat(a[a.length-2])},pa:function(){return/Windows/i.test(v)?
/Phone/.test(v)||/WPDesktop/.test(v)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(v)?"iOS":/Android/.test(v)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(v)?"BlackBerry":/Mac/i.test(v)?"Mac OS X":/Linux/.test(v)?"Linux":""},Aa:function(a){return/Windows Phone/i.test(a)||/WPDesktop/.test(a)?"Windows Phone":/iPad/.test(a)?"iPad":/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Android/.test(a)?"Android":""},Ma:function(a){a=a.split("/");
return 3<=a.length?a[2]:""},q:function(){return b.extend(b.R({$os:b.info.pa(),$browser:b.info.D(v,A.vendor,window.opera),$referrer:m.referrer,$referring_domain:b.info.Ma(m.referrer),$device:b.info.Aa(v)}),{$current_url:window.location.href,$browser_version:b.info.wa(v,A.vendor,window.opera),$screen_height:screen.height,$screen_width:screen.width,mp_lib:"web",$lib_version:"1.0.0"})},Fb:function(){return b.extend(b.R({$os:b.info.pa(),$browser:b.info.D(v,A.vendor,window.opera)}),{$browser_version:b.info.wa(v,
A.vendor,window.opera)})},Eb:function(a){return b.R({mp_page:a,mp_referrer:m.referrer,mp_browser:b.info.D(v,A.vendor,window.opera),mp_platform:b.info.pa()})}};var n={log:function(){if(z&&!b.d(w)&&w)try{w.log.apply(w,arguments)}catch(a){b.a(arguments,function(a){w.log(a)})}},error:function(){if(z&&!b.d(w)&&w){var a=["Alooma error:"].concat(b.I(arguments));try{w.error.apply(w,a)}catch(c){b.a(a,function(a){w.error(a)})}}},F:function(){if(!b.d(w)&&w){var a=["Alooma error:"].concat(b.I(arguments));try{w.error.apply(w,
a)}catch(c){b.a(a,function(a){w.error(a)})}}}};x.prototype.O=D();x.prototype.ia=D();x.prototype.ea=D();x.prototype.ma=function(a){this.Ia=a;return this};x.prototype.z=function(a,c,d,e){var f=this,j=b.tb(a);if(0==j.length)n.error("The DOM query ("+a+") returned 0 elements");else return b.a(j,function(a){b.qa(a,this.La,function(a){var b={},h=f.O(d,this),j=f.Ia.e("track_links_timeout");f.ia(a,this,b);window.setTimeout(f.Ra(e,h,b,p),j);f.Ia.z(c,h,f.Ra(e,h,b))})},this),p};x.prototype.Ra=function(a,b,d,
e){var e=e||t,f=this;return function(){if(!d.ob)d.ob=p,a&&a(e,b)===t||f.ea(b,d,e)}};x.prototype.O=function(a,c){return"function"===typeof a?a(c):b.extend({},a)};b.Fa(B,x);B.prototype.O=function(a,b){var d=B.Ob.O.apply(this,arguments);if(b.href)d.url=b.href;return d};B.prototype.ia=function(a,b,d){d.Ja=2===a.which||a.metaKey||a.ctrlKey||"_blank"===b.target;d.href=b.href;d.Ja||a.preventDefault()};B.prototype.ea=function(a,b){b.Ja||setTimeout(function(){window.location=b.href},0)};b.Fa(G,x);G.prototype.ia=
function(a,b,d){d.element=b;a.preventDefault()};G.prototype.ea=function(a,b){setTimeout(function(){b.element.submit()},0)};k.prototype.q=function(){var a={};b.a(this.props,function(c,d){b.Da(S,d)||(a[d]=c)});return a};k.prototype.load=function(){if(!this.disabled){var a=this.k.parse(this.name);a&&(this.props=b.extend({},a))}};k.prototype.Vb=function(a){var c=a.upgrade,d;if(c)d="mp_super_properties","string"===typeof c&&(d=c),c=this.k.parse(d),this.k.remove(d),this.k.remove(d,p),c&&(this.props=b.extend(this.props,
c.all,c.events));if(!a.cookie_name&&"alooma"!==a.name&&(d="mp_"+a.token+"_"+a.name,c=this.k.parse(d)))this.k.remove(d),this.k.remove(d,p),this.p(c);this.k===b.localStorage&&(c=b.cookie.parse(this.name),b.cookie.remove(this.name),b.cookie.remove(this.name,p),c&&this.p(c))};k.prototype.save=function(){this.disabled||(this.fb(),this.k.set(this.name,b.A(this.props),this.ja,this.ga,this.Na))};k.prototype.remove=function(){this.k.remove(this.name,t);this.k.remove(this.name,p)};k.prototype.clear=function(){this.remove();
this.props={}};k.prototype.p=function(a,c,d){return b.h(a)?("undefined"===typeof c&&(c="None"),this.ja="undefined"===typeof d?this.za:d,b.a(a,function(a,b){if(!this.props[b]||this.props[b]===c)this.props[b]=a},this),this.save(),p):t};k.prototype.H=function(a,c){return b.h(a)?(this.ja="undefined"===typeof c?this.za:c,b.extend(this.props,a),this.save(),p):t};k.prototype.S=function(a){a in this.props&&(delete this.props[a],this.save())};k.prototype.fb=b.Q(function(){var a=this.props.__cmpns,c=z?6E4:
36E5;if(a){for(var d in a)1*new Date-a[d]>c&&delete a[d];b.v(a)&&delete this.props.__cmpns}});k.prototype.Ua=function(){if(!this.xa)this.p(b.info.pb()),this.xa=p};k.prototype.ra=function(a){this.H(b.info.Jb(a))};k.prototype.T=function(a){this.p({$initial_referrer:a||"$direct",$initial_referring_domain:b.info.Ma(a)||"$direct"},"")};k.prototype.xb=function(){return b.R({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};k.prototype.Va=function(a){this.za=
this.ja=a.cookie_expiration;this.Lb(a.disable_persistence);this.Kb(a.cross_subdomain_cookie);this.Nb(a.secure_cookie)};k.prototype.Lb=function(a){(this.disabled=a)&&this.remove()};k.prototype.Kb=function(a){if(a!==this.ga)this.ga=a,this.remove(),this.save()};k.prototype.wb=function(){return this.ga};k.prototype.Nb=function(a){if(a!==this.Na)this.Na=a?p:t,this.remove(),this.save()};k.prototype.l=function(a,c){var d=this.$(a),e=c[a],f=this.B("$set"),j=this.B("$set_once"),h=this.B("$add"),i=this.B("$union"),
g=this.B("$append",[]);"__mps"===d?(b.extend(f,e),this.u("$add",e),this.u("$union",e)):"__mpso"===d?b.a(e,function(a,b){b in j||(j[b]=a)}):"__mpa"===d?b.a(e,function(a,b){b in f?f[b]+=a:(b in h||(h[b]=0),h[b]+=a)},this):"__mpu"===d?b.a(e,function(a,c){b.isArray(a)&&(c in i||(i[c]=[]),i[c]=i[c].concat(a))}):"__mpap"===d&&g.push(e);n.log("ALOOMA PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):");n.log(c);this.save()};k.prototype.u=function(a,c){var d=this.s(a);b.d(d)||(b.a(c,function(a,b){delete d[b]},this),
this.save())};k.prototype.$=function(a){if("$set"===a)return"__mps";if("$set_once"===a)return"__mpso";if("$add"===a)return"__mpa";if("$append"===a)return"__mpap";if("$union"===a)return"__mpu";n.error("Invalid queue:",a)};k.prototype.s=function(a){return this.props[this.$(a)]};k.prototype.B=function(a,c){var d=this.$(a),c=b.d(c)?{}:c;return this.props[d]||(this.props[d]=c)};k.prototype.Mb=function(a){var b=this.props.__timers||{};b[a]=(new Date).getTime();this.props.__timers=b;this.save()};k.prototype.Gb=
function(a){var c=(this.props.__timers||{})[a];b.d(c)||(delete this.props.__timers[a],this.save());return c};g.prototype.ma=function(a,c,d){if(b.d(d))n.error("You must name your new library: init(token, config, name)");else if("alooma"===d)n.error("You must initialize the main alooma object right after you include the Alooma js snippet");else return a=F(a,c,d),u[d]=a,a.N(),a};g.prototype.aa=function(a,c,d){this.__loaded=p;this.config={};this.Oa(b.extend({},T,c,{name:d,token:a,callback_fn:("alooma"===
d?d:"alooma."+d)+"._jsc"}));this._jsc=D();this.X=[];this.Y=[];this.W=[];this.K={disable_all_events:t,identify_called:t};this.persistence=this.cookie=new k(this.config);this.p({distinct_id:b.Za()},"")};g.prototype.N=function(){this.e("loaded")(this);this.e("track_pageview")&&this.Sa()};g.prototype.cb=function(){b.a(this.X,function(a){this.da.apply(this,a)},this);b.a(this.Y,function(a){this.i.apply(this,a)},this);delete this.X;delete this.Y};g.prototype.da=function(a,b){if(this.e("img"))return n.error("You can't use DOM tracking functions with img = true."),
t;if(!L)return this.X.push([a,b]),t;var d=(new a).ma(this);return d.z.apply(d,b)};g.prototype.ba=function(a,c){if(b.d(a))return q;if(I)return function(b){a(b,c)};var d=this._jsc,e=""+Math.floor(1E8*Math.random()),f=this.e("callback_fn")+'["'+e+'"]';d[e]=function(b){delete d[e];a(b,c)};return f};g.prototype.i=function(a,c,d){if(M)this.Y.push(arguments);else{var e=this.e("verbose");c.verbose&&(e=p);this.e("test")&&(c.test=1);e&&(c.verbose=1);this.e("img")&&(c.img=1);if(!I)if(d)c.callback=d;else if(e||
this.e("test"))c.callback="(function(){})";c.ip=this.e("ip")?1:0;c._=(new Date).getTime().toString();a+="?"+b.Wa(c);if("img"in c){var f=m.createElement("img");f.src=a;m.body.appendChild(f)}else if(I){var j=new XMLHttpRequest;j.open("GET",a,p);j.withCredentials=p;j.onreadystatechange=function(){if(4===j.readyState)if(200===j.status)d&&(e?d(b.J(j.responseText)):d(Number(j.responseText)));else{var a="Bad HTTP status: "+j.status+" "+j.statusText;n.error(a);d&&(e?d({status:0,error:a}):d(0))}};j.send(q)}else{f=
m.createElement("script");f.type="text/javascript";f.async=p;f.defer=p;f.src=a;var h=m.getElementsByTagName("script")[0];h.parentNode.insertBefore(f,h)}}};g.prototype.Z=function(a){function c(a,c){b.a(a,function(a){this[a[0]].apply(this,a.slice(1))},c)}var d,e=[],f=[],j=[];b.a(a,function(a){a&&(d=a[0],"function"===typeof a?a.call(this):b.isArray(a)&&"alias"===d?e.push(a):b.isArray(a)&&-1!=d.indexOf("track")&&"function"===typeof this[d]?j.push(a):f.push(a))},this);c(e,this);c(f,this);c(j,this)};g.prototype.push=
function(a){this.Z([a])};g.prototype.disable=function(a){"undefined"===typeof a?this.K.sb=p:this.W=this.W.concat(a)};g.prototype.z=function(a,c,d){if(b.d(a))n.error("No event name provided to alooma.track");else if(this.ua(a))"undefined"!==typeof d&&d(0);else{c=c||{};c.token=this.e("token");var e=this.persistence.Gb(a);b.d(e)||(c.$duration=parseFloat((((new Date).getTime()-e)/1E3).toFixed(3)));this.persistence.ra(m.referrer);this.e("store_google")&&this.persistence.Ua();this.e("save_referrer")&&this.persistence.T(m.referrer);
c=b.extend({},b.info.q(),this.persistence.q(),c);e=this.e("property_blacklist");b.isArray(e)?b.a(e,function(a){delete c[a]}):n.error("Invalid value for property_blacklist config: "+e);a=b.truncate({event:a,properties:c},255);e=b.A(a);e=b.fa(e);n.log("ALOOMA REQUEST:");n.log(a);this.i(this.e("api_host")+"/track/",{data:e},this.ba(d,a));return a}};g.prototype.Sb=function(a,c){var d={};a&&(d=a.properties||{});d.token=this.e("token");this.persistence.ra(m.referrer);this.e("store_google")&&this.persistence.Ua();
this.e("save_referrer")&&this.persistence.T(m.referrer);var d=b.extend({},b.info.q(),this.persistence.q(),d),e=this.e("property_blacklist");b.isArray(e)?b.a(e,function(a){delete d[a]}):n.error("Invalid value for property_blacklist config: "+e);e=a||{};e.properties=d;var e=b.truncate(e,255),f=b.A(e),f=b.fa(f);n.log("ALOOMA REQUEST:");n.log(e);this.i(this.e("api_host")+"/track/",{data:f},this.ba(c,e));return e};g.prototype.Sa=function(a){if(b.d(a))a=m.location.href;this.z("mp_page_view",b.info.Eb(a))};
g.prototype.Ub=function(){return this.da.call(this,B,arguments)};g.prototype.Tb=function(){return this.da.call(this,G,arguments)};g.prototype.Qb=function(a){b.d(a)?n.error("No event name provided to alooma.time_event"):this.ua(a)||this.persistence.Mb(a)};g.prototype.H=function(a,b){this.persistence.H(a,b)};g.prototype.p=function(a,b,d){this.persistence.p(a,b,d)};g.prototype.S=function(a){this.persistence.S(a)};g.prototype.ca=function(a,b){var d={};d[a]=b;this.H(d)};g.prototype.ka=function(a,b,d,e,
f,j){a!=this.G()&&a!=this.P("__alias")&&(this.S("__alias"),this.ca("distinct_id",a));this.K.yb=p;this.people.gb(b,d,e,f,j)};g.prototype.G=function(){return this.P("distinct_id")};g.prototype.lb=function(a,c){if(a===this.P("$people_distinct_id"))return n.F("Attempting to create alias for existing People user - aborting."),-2;var d=this;b.d(c)&&(c=this.G());if(a!==c)return this.ca("__alias",a),this.z("$create_alias",{alias:a,distinct_id:c},function(){d.ka(a)});n.error("alias matches current distinct_id - skipping api call.");
this.ka(a);return-1};g.prototype.Db=function(a){this.ca("mp_name_tag",a)};g.prototype.Oa=function(a){if(b.h(a))b.extend(this.config,a),this.e("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.e("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.Va(this.config),z=z||this.e("debug")};g.prototype.e=function(a){return this.config[a]};g.prototype.P=function(a){return this.persistence.props[a]};g.prototype.toString=
function(){var a=this.e("name");"alooma"!==a&&(a="alooma."+a);return a};g.prototype.ua=function(a){return b.Ga(v)||this.K.sb||b.Da(this.W,a)};l.prototype.aa=function(a){this.c=a};l.prototype.set=function(a,c,d){var e={},f={};b.h(a)?(b.a(a,function(a,b){this.C(b)||(f[b]=a)},this),d=c):f[a]=c;this.L("save_referrer")&&this.c.persistence.T(m.referrer);f=b.extend({},b.info.Fb(),this.c.persistence.xb(),f);e.$set=f;return this.i(e,d)};l.prototype.Pa=function(a,c,d){var e={},f={};b.h(a)?(b.a(a,function(a,
b){this.C(b)||(f[b]=a)},this),d=c):f[a]=c;e.$set_once=f;return this.i(e,d)};l.prototype.Ea=function(a,c,d){var e={},f={};b.h(a)?(b.a(a,function(a,b){this.C(b)||(isNaN(parseFloat(a))?n.error("Invalid increment value passed to alooma.people.increment - must be a number"):f[b]=a)},this),d=c):(b.d(c)&&(c=1),f[a]=c);e.$add=f;return this.i(e,d)};l.prototype.append=function(a,c,d){var e={},f={};b.h(a)?(b.a(a,function(a,b){this.C(b)||(f[b]=a)},this),d=c):f[a]=c;e.$append=f;return this.i(e,d)};l.prototype.Ta=
function(a,c,d){var e={},f={};b.h(a)?(b.a(a,function(a,c){this.C(c)||(f[c]=b.isArray(a)?a:[a])},this),d=c):f[a]=b.isArray(c)?c:[c];e.$union=f;return this.i(e,d)};l.prototype.Rb=function(a,c,d){if(!b.Cb(a)&&(a=parseFloat(a),isNaN(a))){n.error("Invalid value passed to alooma.people.track_charge - must be a number");return}return this.append("$transactions",b.extend({$amount:a},c),d)};l.prototype.qb=function(a){return this.set("$transactions",[],a)};l.prototype.rb=function(){if(this.va())return this.i({$delete:this.c.G()});
n.error("alooma.people.delete_user() requires you to call identify() first")};l.prototype.toString=function(){return this.c.toString()+".people"};l.prototype.i=function(a,c){a.$token=this.L("token");a.$distinct_id=this.c.G();var d=b.Ba(a),e=b.truncate(d,255),d=b.A(d),d=b.fa(d);if(!this.va())return this.eb(a),b.d(c)||(this.L("verbose")?c({status:-1,error:q}):c(-1)),e;n.log("ALOOMA PEOPLE REQUEST:");n.log(e);this.c.i(this.L("api_host")+"/engage/",{data:d},this.c.ba(c,e));return e};l.prototype.L=function(a){return this.c.e(a)};
l.prototype.va=function(){return this.c.K.yb===p};l.prototype.eb=function(a){"$set"in a?this.c.persistence.l("$set",a):"$set_once"in a?this.c.persistence.l("$set_once",a):"$add"in a?this.c.persistence.l("$add",a):"$append"in a?this.c.persistence.l("$append",a):"$union"in a?this.c.persistence.l("$union",a):n.error("Invalid call to _enqueue():",a)};l.prototype.gb=function(a,c,d,e,f){var g=this,h=b.extend({},this.c.persistence.s("$set")),i=b.extend({},this.c.persistence.s("$set_once")),k=b.extend({},
this.c.persistence.s("$add")),o=this.c.persistence.s("$append"),l=b.extend({},this.c.persistence.s("$union"));!b.d(h)&&b.h(h)&&!b.v(h)&&(g.c.persistence.u("$set",h),this.set(h,function(c,d){0==c&&g.c.persistence.l("$set",h);b.d(a)||a(c,d)}));!b.d(i)&&b.h(i)&&!b.v(i)&&(g.c.persistence.u("$set_once",i),this.Pa(i,function(a,c){0==a&&g.c.persistence.l("$set_once",i);b.d(e)||e(a,c)}));!b.d(k)&&b.h(k)&&!b.v(k)&&(g.c.persistence.u("$add",k),this.Ea(k,function(a,d){0==a&&g.c.persistence.l("$add",k);b.d(c)||
c(a,d)}));!b.d(l)&&b.h(l)&&!b.v(l)&&(g.c.persistence.u("$union",l),this.Ta(l,function(a,c){0==a&&g.c.persistence.l("$union",l);b.d(f)||f(a,c)}));if(!b.d(o)&&b.isArray(o)&&o.length){for(var m=o.length-1;0<=m;m--){var n=o.pop();g.append(n,function(a,c){0==a&&g.c.persistence.l("$append",n);b.d(d)||d(a,c)})}g.c.persistence.save()}};l.prototype.C=function(a){return"$distinct_id"===a||"$token"===a};g.bb=function(a,c){b.nb(this);this.mb=c;this.rc=this.mb.persistence;this.ic=b.j(a.id);this.pc=b.j(a.message_id);
this.body=(b.j(a.body)||"").replace(/\n/g,"<br/>");this.jc=b.j(a.cta)||"Close";this.ha=b.j(a.cta_url)||q;this.la=b.j(a.image_url)||q;this.Ka=b.j(a.type)||"takeover";this.style=b.j(a.style)||"light";this.w=b.j(a.thumb_image_url)||q;this.title=b.j(a.title)||"";this.U=b.j(a.video_url)||q;this.uc=s.ab;this.tc=s.$a;this.ya=p;if(!this.ha)this.ha="#dismiss",this.ya=t;this.oa="mini"===this.Ka;if(!this.oa)this.Ka="takeover";this.qc=!this.oa?s.Xa:s.Ya;this.jb();this.oc=this.hb();this.ib()};var s=g.bb;s.$b=
200;s.sa="alooma-notification";s.ac=0.6;s.dc=25;s.cc=200;s.Xa=388;s.Ya=420;s.bc=85;s.ec=5;s.V=60;s.fc=Math.round(s.V/2);s.ab=595;s.$a=334;s.prototype.M=function(a){return m.getElementById(s.sa+"-"+a)};s.prototype.ta=function(a,b){return this.m[a]&&this.m[a]<=b};s.prototype.hb=function(){var a=[];this.oa?(this.w=this.w||"//cdn.mxpnl.com/site_media/images/icons/notifications/mini-news-dark.png",a.push(this.w)):(this.la?(a.push(this.la),this.zb='<img id="img" src="'+this.la+'"/>'):this.zb="",this.w?
(a.push(this.w),this.Pb='<div id="thumbborder-wrapper"><div id="thumbborder"></div></div><img id="thumbnail" src="'+this.w+'" width="'+s.V+'" height="'+s.V+'"/><div id="thumbspacer"></div>'):this.Pb="");return a};s.prototype.ib=b.Q(function(){if(this.U){var a=this;a.Zb="postMessage"in window;m.createElement("div");a.ha=a.U;var b=a.U.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i),d=a.U.match(/vimeo\.com\/.*?(\d+)/i);if(b){if(a.Qa=p,
a.wc=b[1],a.Zb)window.onYouTubeIframeAPIReady=function(){a.M("video-frame")&&a.kb()},b=m.createElement("script"),b.src="//www.youtube.com/iframe_api",d=m.getElementsByTagName("script")[0],d.parentNode.insertBefore(b,d)}else if(d)a.Qa=p,a.vc=d[1];if(a.ta("ie",7)||a.ta("firefox",3))a.Qa=t,a.ya=p}});s.prototype.jb=function(){function a(a){if(a in e)return p;if(!d)for(var a=a[0].toUpperCase()+a.slice(1),a=["O"+a,"Webkit"+a,"Moz"+a],b=0;b<a.length;b++)if(a[b]in e)return p;return t}function b(a){return(a=
A.userAgent.match(a))&&a[1]}this.m={};this.m.chrome=b(/Chrome\/(\d+)/);this.m.firefox=b(/Firefox\/(\d+)/);this.m.ie=b(/MSIE (\d+).+/);!this.m.ie&&!window.ActiveXObject&&"ActiveXObject"in window&&(this.m.ie=11);if(this.o=m.body||m.getElementsByTagName("body")[0])this.lc=Math.max(this.o.scrollWidth,m.documentElement.scrollWidth,this.o.offsetWidth,m.documentElement.offsetWidth,this.o.clientWidth,m.documentElement.clientWidth),this.kc=Math.max(this.o.scrollHeight,m.documentElement.scrollHeight,this.o.offsetHeight,
m.documentElement.offsetHeight,this.o.clientHeight,m.documentElement.clientHeight);var d=this.m.ie,e=m.createElement("div").style;this.sc=this.o&&a("transition")&&a("transform");this.mc=(33<=this.m.chrome||15<=this.m.firefox)&&this.o&&a("backfaceVisibility")&&a("perspective")&&a("transform")};s.prototype.kb=b.Q(function(){var a=this;if(!a.Yb){a.Yb=p;var c=a.M("video-elapsed"),d=a.M("video-time"),e=a.M("video-progress");new window.YT.Player(s.sa+"-video-frame",{events:{onReady:function(f){function g(a){var a=
Math.round(i-a),b=Math.floor(a/60),c=Math.floor(b/60),a=a-60*b;d.innerHTML="-"+(c?c+":":"")+("00"+(b-60*c)).slice(-2)+":"+("00"+a).slice(-2)}var h=f.target,i=h.getDuration();g(0);a.gc=window.setInterval(function(){var a=h.getCurrentTime();c.style.width=100*(a/i)+"%";g(a)},250);b.qa(e,"click",function(a){a=Math.max(0,a.pageX-e.getBoundingClientRect().left);h.seekTo(i*a/e.clientWidth,p)})}}})}});b.toArray=b.I;b.isObject=b.h;b.JSONEncode=b.A;b.JSONDecode=b.J;b.isBlockedUA=b.Ga;b.isEmptyObject=b.v;b.info=
b.info;b.info.device=b.info.Aa;b.info.browser=b.info.D;b.info.properties=b.info.q;g.prototype.init=g.prototype.ma;g.prototype.disable=g.prototype.disable;g.prototype.time_event=g.prototype.Qb;g.prototype.track=g.prototype.z;g.prototype.track_custom_event=g.prototype.Sb;g.prototype.track_links=g.prototype.Ub;g.prototype.track_forms=g.prototype.Tb;g.prototype.track_pageview=g.prototype.Sa;g.prototype.register=g.prototype.H;g.prototype.register_once=g.prototype.p;g.prototype.unregister=g.prototype.S;
g.prototype.identify=g.prototype.ka;g.prototype.alias=g.prototype.lb;g.prototype.name_tag=g.prototype.Db;g.prototype.set_config=g.prototype.Oa;g.prototype.get_config=g.prototype.e;g.prototype.get_property=g.prototype.P;g.prototype.get_distinct_id=g.prototype.G;g.prototype.toString=g.prototype.toString;k.prototype.properties=k.prototype.q;k.prototype.update_search_keyword=k.prototype.ra;k.prototype.update_referrer_info=k.prototype.T;k.prototype.get_cross_subdomain=k.prototype.wb;k.prototype.clear=
k.prototype.clear;l.prototype.set=l.prototype.set;l.prototype.set_once=l.prototype.Pa;l.prototype.increment=l.prototype.Ea;l.prototype.append=l.prototype.append;l.prototype.union=l.prototype.Ta;l.prototype.track_charge=l.prototype.Rb;l.prototype.clear_charges=l.prototype.qb;l.prototype.delete_user=l.prototype.rb;l.prototype.toString=l.prototype.toString;b.Hb(g);var y={};(function(){J=1;u=window.alooma;b.d(u)?n.F("'alooma' object not initialized. Ensure you are using the latest version of the Alooma JS Library along with the snippet we provide."):
u.__loaded||u.config&&u.persistence?n.error("Alooma library has already been downloaded at least once."):1.1>(u.__SV||0)?n.F("Version mismatch; please ensure you're using the latest version of the Alooma code snippet."):(b.a(u._i,function(a){a&&b.isArray(a)&&(y[a[a.length-1]]=F.apply(this,a))}),P(),u.init(),b.a(y,function(a){a.N()}),O())})()})();
})();
